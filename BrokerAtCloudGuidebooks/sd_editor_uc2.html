<!DOCTYPE html>
<html prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
              rdfs: http://www.w3.org/2000/01/rdf-schema#
              foaf: http://xmlns.com/foaf/0.1/
              owl: http://www.w3.org/2002/07/owl#
              dcterms: http://purl.org/dc/terms/
              gr: http://purl.org/goodrelations/v1#
              usdl-core: http://www.linked-usdl.org/ns/usdl-core#

              vcard: http://www.w3.org/2006/vcard/ns#
              xsd: http://www.w3.org/2001/XMLSchema#">

<head>
    <!--link rel="stylesheet" type = "text/css" href="styles.css"-->
    <style>
        .droptarget {
            float: down;
            <!-- width: 400px;
            --> height: 50px;
            margin: 5px;
            padding: 5px;
            font-size: 14pt;
            border: 5px solid #ffaaaa;
            background-color: lightgrey;
        }
    </style>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>USDL Service Description Editor for Broker Policies with instantiated profiles</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=980" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="shortcut icon" href="images/usdl-solo.ico" />
    <link rel="apple-touch-icon" href="images/splash_about.png" />
    <link rel="stylesheet" href="jquery/css/smoothness/jquery-ui-1.8.6.custom.css" />
    <link rel="stylesheet" href="css/jquery-ui-timepicker-addon.css" />
    <!--link rel="stylesheet" href="css/jquery.jgrowl.css" type="text/css"/-->
    <!--link rel="stylesheet" href="css/ui.sa.css" />
<link rel="stylesheet" href="css/sapUiUx3.css" />
<link rel="stylesheet" href="css/infovis.css" /-->

    <!-- Bootstrap -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">

    <!-- Bootstrap theme -->
    <link href="bower_components/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="template.css" rel="stylesheet">

    <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!--script type="text/javascript" src="jquery/js/jquery-1.6.2.min.js" ></script-->
    <!--script type="text/javascript" src="jquery/js/jquery-ui-1.8.16.custom.min.js"></script-->
    <script type="text/javascript" src="js/jquery-ui-timepicker-addon.js"></script>
    <script type="text/javascript" src="js/jquery.editable-1.3.3.js"></script>
    <script type="text/javascript" src="js/jquery.livequery.js"></script>
    <script type="text/javascript" src="js/jquery.clicknscroll.v1.0.js"></script>
    <script type="text/javascript" src="js/jquery.sa.js"></script>
    <script type="text/javascript" src="js/jquery.cookie.js"></script>
    <script type="text/javascript" src="js/mime.js"></script>
    <script type="text/javascript" src="js/slidedeck.js"></script>
    <script type="text/javascript" src="js/jquery.jgrowl_minimized.js"></script>
    <script type="text/javascript" src="js/Math.uuid.js"></script>
    <script type="text/javascript" src="js/base64.js"></script>
    <!--script type="text/javascript" src="js/jit-yc.js"></script-->
    <script type="text/javascript" src="rdfquery/jquery.json.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.uri.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.xmlns.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.curie.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.datatype.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.rdf.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.rdfa.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.rdf.json.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.rdf.xml.js"></script>
    <script type="text/javascript" src="rdfquery/jquery.rdf.turtle.js"></script>
    <!--<script type="text/javascript" src="js/usdl.editor.cas.js"></script> -->
    <script type="text/javascript">
        var kb;

        function deleteQualitativeTables() {
            var anchor = document.getElementById("qualvalues");
            anchor.innerHTML = "";
            // tbd
        }

        function deactivateInputFields() {
            document.getElementById("bp_namespace").disabled = true;
            document.getElementById("bp_business_entity").disabled = true;
            document.getElementById("bp_legal_name").disabled = true;
            document.getElementById("bp_instance").disabled = true;
            document.getElementById("bp_model").disabled = true;
            document.getElementById("slp_class").disabled = true;
            document.getElementById("classtaxpref").disabled = true;
            document.getElementById("classtaxroot").disabled = true;
            document.getElementById("classtaxURI").disabled = true;

            deactivateQuantSLSchemaTable();
            //document.getElementById("quant_sl_table_add").disabled = true;
            //document.getElementById("quant_sl_table_delete").disabled = true;
            deactivateQualSLSchemaTable();
            //document.getElementById("qual_sl_table_add").disabled = true;
            //document.getElementById("qual_sl_table_delete").disabled = true;
            deactivateClassTaxTable();
            //document.getElementById("classtax_table_add").disabled = true;
            //document.getElementById("classtax_table_delete").disabled = true;

            //document.getElementById("safe_schemas").disabled = true;
            //document.getElementById("edit_schemas").disabled = false;
        }

        function deactivateQuantSLSchemaTable() {
            var quant_sl_table = document.getElementById("quantserviceleveldetails");
            for (i = 1; i < quant_sl_table.rows.length; i++) {

                quant_sl_table.rows[i].cells[2].childNodes[0].disabled = true;
                quant_sl_table.rows[i].cells[3].childNodes[0].disabled = true;
                quant_sl_table.rows[i].cells[4].childNodes[0].disabled = true;
                quant_sl_table.rows[i].cells[5].childNodes[0].disabled = true;
                quant_sl_table.rows[i].cells[6].childNodes[0].disabled = true;
                quant_sl_table.rows[i].cells[7].childNodes[0].disabled = true;
                quant_sl_table.rows[i].cells[8].childNodes[0].disabled = true;
                quant_sl_table.rows[i].cells[9].childNodes[0].disabled = true;
            }
        }

        function deactivateQualSLSchemaTable() {
            var qual_sl_table = document.getElementById("qualserviceleveldetails");
            for (i = 1; i < qual_sl_table.rows.length; i++) {

                qual_sl_table.rows[i].cells[2].childNodes[0].disabled = true;
                qual_sl_table.rows[i].cells[3].childNodes[0].disabled = true;
            }
        }

        function deactivateClassTaxTable() {
            var qual_sl_table = document.getElementById("classtaxconcepts");
            for (i = 1; i < qual_sl_table.rows.length; i++) {

                qual_sl_table.rows[i].cells[2].childNodes[0].disabled = true;
                qual_sl_table.rows[i].cells[3].childNodes[0].disabled = true;
                qual_sl_table.rows[i].cells[4].childNodes[0].disabled = true;
            }
        }

        function allowDrop(event) {
            event.preventDefault();
        }

        function findBase(kb) {
            var base = kb.databank.baseURI
            var services = kb.where("?brokerPolicy a ?serviceModel")
                .where("?serviceModel rdfs:subClassOf usdl-core:ServiceModel");

            services.each(function () {
                var selection_class = this["serviceModel"];
                var selection_instance = this["brokerPolicy"];

                var url_class = selection_class.value._string;
                var url_instance = selection_instance.value._string;
                base = url_class.split('#')[0];
                document.getElementById("bp_namespace").value = base;
                // Assign the service model class and instance to the business policy form
                document.getElementById("bp_model").value = url_class.split('#')[1];
                document.getElementById("bp_instance").value = url_instance.split('#')[1];
                // Assign the service model class and instance to the service description form
                document.getElementById("servicemodel_class").value = url_class.split('#')[1];
                document.getElementById("servicemodel").value = url_instance.split('#')[1];

            })
            var business_entity = kb.where("?bentity a gr:BusinessEntity")
                .where("?bentity gr:legalName ?legalName")
            business_entity.each(function () {
                var bizentity = this["bentity"];
                var legalname = this["legalName"];

                var url_bizentity = bizentity.value._string;

                // Assign the service model class and instance to the business policy form
                document.getElementById("bp_business_entity").value = url_bizentity.split('#')[1];
                document.getElementById("bp_legal_name").value = legalname.value;

            })

            return base
        }

        function addQuantSLConcept() {
            var table = document.getElementById("quantserviceleveldetails");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var cell1 = row.insertCell(0);
            //var element1 = document.createElement("input");
            //element1.type = "checkbox";
            //element1.type = "chkbox[]";
            //cell1.appendChild(element1);
            cell1.innerHTML = "<div class='checkbox'><label><input type='checkbox' value=''></label></div>";
            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount + 1;
            var cell3 = row.insertCell(2);
            cell3.innerHTML = "<input type='text'>";
            var cell4 = row.insertCell(3);
            cell4.innerHTML = "<input type='text'>";
            var cell5 = row.insertCell(4);
            cell5.innerHTML = "<input type='text'>";
            var cell6 = row.insertCell(5);
            cell6.innerHTML = "<select name='valuetype' id='value_type' > <option>integer</option> <option>float</option> </select>";
            var cell7 = row.insertCell(6);
            cell7.innerHTML = "<input type='text'>";
            var cell8 = row.insertCell(7);
            cell8.innerHTML = "<input type='text'>";
            var cell9 = row.insertCell(8);
            cell9.innerHTML = "<input type='checkbox'>";
            var cell10 = row.insertCell(9);
            cell10.innerHTML = "<input type='checkbox'>";
        }

        function deleteQuantSLConcept() {
            try {
                var table = document.getElementById("quantserviceleveldetails");
                var rowCount = table.rows.length;
                for (var i = 1; i < rowCount; i++) {
                    var row = table.rows[i];
                    var chkbox = row.cells[0].childNodes[0].childNodes[0].childNodes[0];
                    if (null != chkbox && true == chkbox.checked) {
                        table.deleteRow(i);
                        rowCount--;
                        i--;
                    }
                }
            } catch (e) {
                alert(e);
            }
        }

        function addClassificationConcept() {
            var table = document.getElementById("classtaxconcepts");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var cell1 = row.insertCell(0);

            cell1.innerHTML = "<div class='checkbox'><label><input type='checkbox' value=''></label></div>";
            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount + 1;
            var cell3 = row.insertCell(2);
            cell3.innerHTML = "<input type='text'>";
            var cell4 = row.insertCell(3);
            cell4.innerHTML = "<input type='text'>";
            var cell5 = row.insertCell(4);
            cell5.innerHTML = "<input type='text'>";

        }



        function deleteClassificationConcept() {
            try {
                var table = document.getElementById("classtaxconcepts");
                var rowCount = table.rows.length;
                for (var i = 1; i < rowCount; i++) {
                    var row = table.rows[i];
                    var chkbox = row.cells[0].childNodes[0].childNodes[0].childNodes[0];
                    if (null != chkbox && true == chkbox.checked) {
                        table.deleteRow(i);
                        rowCount--;
                        i--;
                    }
                }
            } catch (e) {
                alert(e);
            }
        }


        function addConcept() {
            var table = document.getElementById("class_table");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var cell1 = row.insertCell(0);
            //var element1 = document.createElement("input");
            //element1.type = "checkbox";
            //element1.type = "chkbox[]";
            //cell1.appendChild(element1);
            cell1.innerHTML = "<div class='checkbox'><label><input type='checkbox' value=''></label></div>";
            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount + 1;
            var cell3 = row.insertCell(2);
            var tax_class = document.getElementById("classtaxonomy").value;
            cell3.innerHTML = tax_class;
        }

        function deleteConcept() {
            try {
                var table = document.getElementById("class_table");
                var rowCount = table.rows.length;
                for (var i = 0; i < rowCount; i++) {
                    var row = table.rows[i];
                    var chkbox = row.cells[0].childNodes[0].childNodes[0].childNodes[0];
                    if (null != chkbox && true == chkbox.checked) {
                        table.deleteRow(i);
                        rowCount--;
                        i--;
                    }
                }
            } catch (e) {
                alert(e);
            }
        }

        function addClassificationConceptsToSD(kb) {
            var class_table = document.getElementById("class_table");
            for (i = 0; i < class_table.rows.length; i++) {
                kb.add("<" + document.getElementById("sd_model").value + "> usdl-core-cb:hasClassificationDimension " + "<" + class_table.rows[i].cells[2].innerHTML + "> .")
            }
            return kb;
        }

        //output
        function addQualServiceLevelsToSD(kb) {
            var qual_sl_table = document.getElementById("qualserviceleveldetails");
            for (i = 1; i < qual_sl_table.rows.length; i++) {
                var qual_value_type = qual_sl_table.rows[i].cells[2].childNodes[0].value;
                // SL instance
                kb.add("<SL" + qual_value_type + "Instance> a " + "bp:SL" + qual_value_type + " .")
                    .add("<" + document.getElementById("slp").value + "> bp:hasSL" + qual_value_type + " <SL" + qual_value_type + "Instance> .")

                // SLE instance
                kb.add("<SLE" + qual_value_type + "Instance> a " + "bp:SLE" + qual_value_type + " .")
                    .add("<SL" + qual_value_type + "Instance> bp:hasSLE" + qual_value_type + " <SLE" + qual_value_type + "Instance> .")

                // Var instance
                kb.add("<Var" + qual_value_type + "Instance> a " + "bp:Var" + qual_value_type + " .")
                    .add("<SLE" + qual_value_type + "Instance> bp:hasVar" + qual_value_type + " <Var" + qual_value_type + "Instance> .")

                // bind var instance to the qual value instance
                var ddlb = document.getElementById("ddlb_" + qual_value_type);
                kb.add("<Var" + qual_value_type + "Instance>  " + "bp:hasDefault" + qual_value_type + " <" + ddlb.value + "> .");

            }
            return kb;
        }

        //output
        function addQuantServiceLevelsToSD(kb) {
            var quant_sl_table = document.getElementById("slvaluequant");
            for (i = 1; i < quant_sl_table.rows.length; i++) {
                var quant_value_type = quant_sl_table.rows[i].cells[2].childNodes[0].value;
                var quant_value_inst = quant_sl_table.rows[i].cells[4].childNodes[0].value;
                // SL instance
                kb.add("<SL" + quant_value_type + "Instance> a " + "bp:SL" + quant_value_type + " .")
                    .add("<" + document.getElementById("slp").value + "> bp:hasSL" + quant_value_type + " <SL" + quant_value_type + "Instance> .")

                // SLE instance
                kb.add("<SLE" + quant_value_type + "Instance> a " + "bp:SLE" + quant_value_type + " .")
                    .add("<SL" + quant_value_type + "Instance> bp:hasSLE" + quant_value_type + " <SLE" + quant_value_type + "Instance> .")

                // Var instance
                kb.add("<Var" + quant_value_type + "Instance> a " + "bp:Var" + quant_value_type + " .")
                    .add("<SLE" + quant_value_type + "Instance> bp:hasVar" + quant_value_type + " <Var" + quant_value_type + "Instance> .")


                // bind var instance to the quant value instance
                kb.add("<" + quant_value_inst + "> a bp:" + quant_value_type + " .")
                kb.add("<" + quant_value_inst + "> " + ' rdfs:label "' + quant_sl_table.rows[i].cells[5].childNodes[0].value + '"^^xsd:string .')
                kb.add("<" + quant_value_inst + "> " + ' gr:hasUnitOfMeasurement "' + quant_sl_table.rows[i].cells[6].childNodes[0].value + '"^^xsd:string .')
                kb.add("<Var" + quant_value_type + "Instance>  " + "bp:hasDefault" + quant_value_type + " <" + quant_value_inst + "> .");

                // specify quant value instance  Here the parsing code has to be adapted!!!
                if (quant_sl_table.rows[i].cells[11].childNodes[0].checked == true) {
                    // int or float value subclass
                    if (quant_sl_table.rows[i].cells[7].childNodes[0].value == "integer") {
                        // Int value subclass

                        kb.add("<" + quant_value_inst + "> " + ' gr:hasMinValueInteger "' + quant_sl_table.rows[i].cells[8].childNodes[0].value + '"^^<http://www.w3.org/2001/XMLSchema#integer> .')
                            .add("<" + quant_value_inst + "> " + ' gr:hasMaxValueInteger "' + quant_sl_table.rows[i].cells[10].childNodes[0].value + '"^^<http://www.w3.org/2001/XMLSchema#integer> .')
                    } else {
                        // Float value subclass

                        kb.add("<" + quant_value_inst + "> " + ' gr:hasMinValueFloat "' + quant_sl_table.rows[i].cells[8].childNodes[0].value + '"^^xsd:float .')
                            .add("<" + quant_value_inst + "> " + ' gr:hasMaxValueFloat "' + quant_sl_table.rows[i].cells[10].childNodes[0].value + '"^^xsd:float .')

                    }
                } else {
                    // int or float value subclass
                    if (quant_sl_table.rows[i].cells[7].childNodes[0].value == "integer") {
                        // Int value subclass

                        kb.add("<" + quant_value_inst + "> " + ' gr:hasValueInteger "' + quant_sl_table.rows[i].cells[9].childNodes[0].value + '"^^<http://www.w3.org/2001/XMLSchema#integer> .')

                    } else {
                        // Float value subclass

                        kb.add("<" + quant_value_inst + "> " + ' gr:hasValueFloat "' + quant_sl_table.rows[i].cells[9].childNodes[0].value + '"^^xsd:float .')


                    }
                }
            }
            return kb;
        }






        function setServiceLevels(url, prop) {
            //Empty SL table
            var sl_table = document.getElementById("serviceleveldetails");
            while (sl_table.rows.length > 1) {
                sl_table.deleteRow(-1);
            }
            //Insert service levels into SL table
            for (i = 0; i < prop.length; i++) {
                var sl_prop = prop[i];
                //   window.alert (sl_prop);
                var sl = document.kb.where("<" + url + ">" + " <" + prop[i] + "> " + "?sl");
                sl.each(function () {

                    var sel = this["sl"];
                    var sl_url = sel.value._string;
                    var value_instance_url = "";
                    var value_instance_label = "";
                    //var unit_of_measurement="";
                    // Find label of the value instance
                    var value_instance = document.kb.where("<" + sl_url + ">" + " ?sle_prop " + " ?sle")
                        .where("?sle_prop rdfs:subPropertyOf usdl-sla:hasServiceLevelExpression")
                        .where("?sle ?var_prop ?var")
                        .where("?var_prop rdfs:subPropertyOf usdl-sla:hasVariable")
                        .where("?var ?value_prop ?value")
                        .where("?value rdfs:label ?text");
                    //.where("?value gr:valueReference ?unit");
                    //.optional("?value_prop rdfs:subPropertyOf usdl-sla-cb:hasDefaultQualitativeValue");
                    value_instance.each(function () {
                            var sel_value_instance = this["value"];
                            value_instance_url = sel_value_instance.value._string;
                            var sel_label = this["text"];
                            value_instance_label = sel_label.value;
                            //var sel_unit = this["unit"];
                            //if (sel_unit === undefined) {window.alert("undefined!")} else
                            //{unit_of_measurement = sel_unit.value._string;}

                            //window.alert(var_url);
                        })
                        // Insert data into the table
                    var sl_table = document.getElementById("serviceleveldetails");
                    var new_row = sl_table.insertRow(-1);
                    var cell1 = new_row.insertCell(0);
                    var cell2 = new_row.insertCell(1);
                    var cell3 = new_row.insertCell(2);
                    //var cell4 = new_row.insertCell(3);
                    cell1.innerHTML = sl_url.split('#')[1];
                    cell2.innerHTML = value_instance_url.split('#')[1];
                    cell3.innerHTML = value_instance_label;
                    //cell4.innerHTML = "Unit of Measurement: " + unit_of_measurement;
                    // window.alert("event fired!");
                })
            }
        }


        function loadBP(event) {
            event.preventDefault();
            var dt = event.dataTransfer
            var files = dt.files
            if (files.length == 1) {

                var reader = new FileReader();
                reader.onload = function (event) {
                    var content = event.target.result;
                    var kb = $.rdf();
                    kb.load(content);

                    kb.prefix('foaf', 'http://xmlns.com/foaf/0.1/')
                        .prefix('rdf', 'http://www.w3.org/1999/02/22-rdf-syntax-ns#')
                        .prefix('rdfs', 'http://www.w3.org/2000/01/rdf-schema#')
                        .prefix('owl', 'http://www.w3.org/2002/07/owl#')
                        .prefix('dcterms', 'http://purl.org/dc/terms/')
                        .prefix('usdl-core', 'http://www.linked-usdl.org/ns/usdl-core#')
                        .prefix('usdl-core-cb', 'http://www.linked-usdl.org/ns/usdl-core/cloud-broker#')
                        .prefix('usdl-sla', 'http://www.linked-usdl.org/ns/usdl-sla#')
                        .prefix('usdl-sla-cb', 'http://www.linked-usdl.org/ns/usdl-core/cloud-broker-sla#')
                        .prefix('usdl-business-roles', 'http://www.linked-usdl.org/ns/usdl-business-roles#')
                        .prefix('blueprint', 'http://bizweb.sap.com/TR/blueprint#')
                        .prefix('vcard', 'http://www.w3.org/2006/vcard/ns#')
                        .prefix('xsd', 'http://www.w3.org/2001/XMLSchema#')
                        .prefix('ctag', 'http://commontag.org/ns#')
                        .prefix('org', 'http://www.w3.org/ns/org#')
                        .prefix('skos', 'http://www.w3.org/2004/02/skos/core#')
                        .prefix('time', 'http://www.w3.org/2006/time#')
                        .prefix('gr', 'http://purl.org/goodrelations/v1#')
                        .prefix('doap', 'http://usefulinc.com/ns/doap#')
                        .base(findBase(kb) + "#");

                    kb.prefix('bp', kb.base());

                    loadClassificationTaxonomy(kb);

                    loadClassificationConcepts(kb);


                    //Load SLP class
                    var slpclasses = kb.where("?slps rdfs:subClassOf usdl-sla:ServiceLevelProfile");
                    slpclasses.each(function () {
                        var sel = this["slps"];
                        var url_slps = sel.value._string;
                        document.getElementById("slp_class").value = url_slps.split('#')[1];
                    })
                    loadQuantitativeSLSchemas(kb);
                    loadQualitativeSLSchemasNG(kb);
                    deactivateInputFields();
                    //Create quant values table

                    createQuantitativeSLValuesTable(kb);

                    //window.alert(kb.base());
                    document.kb = kb;
                }
                reader.readAsText(files[0]);
                document.getElementById("bp").innerHTML = "Broker policy loaded!";
                $("#serviceEditArea").collapse('show');
                $("#serviceLoadArea").collapse('hide');

            }
        }



        function loadQualValuesNG(kb, serviceLevel, description) {
            //create table
            var qvTable = document.createElement('table');
            qvTable.setAttribute('id', 'table_' + serviceLevel);
            qvTable.setAttribute('style', 'width: 90%');
            var qvHeader = qvTable.insertRow();
            [{}, {
                content: '#'
            }, {
                content: 'Value'
            }, {
                content: 'Description',
                style: 'width: 80%'
            }].forEach(function (descriptor) {
                var headerCell = document.createElement('th');
                if (descriptor.content) headerCell.appendChild(document.createTextNode(descriptor.content));
                if (descriptor.style) headerCell.setAttribute('style', descriptor.style);
                qvHeader.appendChild(headerCell);
            });


            var selectbox = document.createElement("SELECT");
            selectbox.setAttribute('id', 'ddlb_' + serviceLevel);

            //var selectbox_string = '<select style="" id="ddlb_' + serviceLevel + '"' + '>';
            //var table = document.getElementById("table_" + serviceLevel);
            //table_string = table_string + '<div><H2>Value set of ' + serviceLevel + '</H2>';
            //table_string = table_string + '<p>' + description + '</p>';
            //table_string = table_string + '<table style="width: 90%" id="table_' + serviceLevel + '"' + '>' + '<tr><th></th><th></th><th>Value</th><th style="width: 80%">Description</th></tr>';

            // fill table with data

            var query = kb.where("?valinst a bp:" + serviceLevel + "");
            var rowcounter = 0;
            query.each(function () {
                    var qvRow = qvTable.insertRow();
                    var selection = this["valinst"];
                    var qv_url = selection.value._string;
                    var checkbox = document.createElement('input');
                    checkbox.setAttribute('type', 'checkbox');
                    qvRow.insertCell().appendChild(checkbox);
                    //table_string = table_string + "<tr><td><input type='checkbox'></td>";
                    rowcounter++;
                    qvRow.insertCell().appendChild(document.createTextNode(rowcounter));
                    //table_string = table_string + "<td>" + rowcounter + "</td>";
                    var sl = document.createElement('input');
                    sl.setAttribute('type', 'text');
                    sl.setAttribute('value', qv_url.split("#")[1]);
                    sl.setAttribute('disabled', 'true');
                    qvRow.insertCell().appendChild(sl);
                    //table_string = table_string + "<td><input type='text' disabled value='" + qv_url.split("#")[1] + "'></input></td>";
                    var cell4Value = '';
                    var label = kb.where("<" + qv_url + ">" + " rdfs:label ?label");
                    label.each(function () {
                        cell4Value = this["label"].value;
                    });
                    var slDesc = document.createElement('input');
                    slDesc.setAttribute('type', 'text');
                    slDesc.setAttribute('value', cell4Value);
                    slDesc.setAttribute('disabled', 'true');
                    qvRow.insertCell().appendChild(slDesc);
                    //table_string = table_string + "<td><input type='text' disabled value='" + cell4Value + "'></input></td></tr>";
                    //selectbox_string = selectbox_string + '<option value="' + qv_url + '">' + qv_url.split("#")[1] + '</option>';
                    var selectOption = document.createElement('option');
                    selectOption.setAttribute('value', qv_url);
                    selectOption.appendChild(document.createTextNode(qv_url.split("#")[1]));
                    selectbox.appendChild(selectOption);
                })
                //table_string = table_string + '</table>';
                //selectbox_string = selectbox_string + '</select>';
                //table_string = table_string + selectbox_string + '</div>';

            var qvDiv = document.createElement("div");
            var header = document.createElement('H2');
            header.appendChild(document.createTextNode('Value set of ' + serviceLevel));
            qvDiv.appendChild(header);
            var descriptionNode = document.createElement('p');
            descriptionNode.appendChild(document.createTextNode(description));
            qvDiv.appendChild(descriptionNode);

            qvDiv.appendChild(qvTable);
            qvDiv.appendChild(selectbox);
            var table = document.getElementById("qualvalues").appendChild(qvDiv);

        }

        function loadQualitativeSLSchemasNG(kb) {
            var table = document.getElementById("qualserviceleveldetails");
            var quant_sls = kb.where("?qvc rdfs:subClassOf gr:QualitativeValue");
            quant_sls.each(function () {

                var selection = this["qvc"];
                var sls_url = selection.value._string;

                var serviceLevel = sls_url.split("#")[1];
                var serviceLevelDescription = '';
                var label = kb.where("<" + sls_url + ">" + " rdfs:label ?label");
                label.each(function () {
                    serviceLevelDescription = this["label"].value;
                });

                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                var cell1 = row.insertCell(0);
                var cell1content = document.createElement("INPUT");
                cell1content.setAttribute('type', 'checkbox');
                cell1.appendChild(cell1content);
                //cell1.innerHTML = "<input type='checkbox'>";
                var cell2 = row.insertCell(1);
                cell2.appendChild(document.createTextNode(rowCount + 1));
                var cell3 = row.insertCell(2);
                var serviceLevelInput = document.createElement("INPUT");
                serviceLevelInput.setAttribute('type', 'text');
                serviceLevelInput.setAttribute('value', serviceLevel);
                cell3.appendChild(serviceLevelInput);
                //cell3.innerHTML = "<input type='text'>";
                //cell3.childNodes[0].value = serviceLevel;
                var cell4 = row.insertCell(3);
                var serviceLevelDescriptionInput = document.createElement("INPUT");
                serviceLevelDescriptionInput.setAttribute('type', 'text');
                serviceLevelDescriptionInput.setAttribute('value', serviceLevelDescription);
                cell4.appendChild(serviceLevelDescriptionInput);
                loadQualValuesNG(kb, serviceLevel, serviceLevelDescription);
            });
            //TODO: after each ServiceLevel load the matching ValueSets immideately
        }

        function loadQuantitativeSLSchemas(kb) {
            var quant_sls = kb.where("?qvc rdfs:subClassOf gr:QuantitativeValueInteger");
            quant_sls.each(function () {
                var selection = this["qvc"];
                var sls_url = selection.value._string;
                var table = document.getElementById("quantserviceleveldetails");
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                var cell1 = row.insertCell(0);
                cell1.innerHTML = "<input type='checkbox'>";
                var cell2 = row.insertCell(1);
                cell2.innerHTML = rowCount + 1;
                var cell3 = row.insertCell(2);
                cell3.innerHTML = "<input type='text'>";
                cell3.childNodes[0].value = sls_url.split("#")[1];
                var cell4 = row.insertCell(3);
                cell4.innerHTML = "<input type='text'>";
                var cell5 = row.insertCell(4);
                cell5.innerHTML = "<input type='text'>";
                var cell6 = row.insertCell(5);
                cell6.innerHTML = "<select name='valuetype' id='value_type' > <option>integer</option> <option>float</option> </select>";
                var cell7 = row.insertCell(6);
                cell7.innerHTML = "<input type='text'>";
                var cell8 = row.insertCell(7);
                cell8.innerHTML = "<input type='text'>";
                var cell9 = row.insertCell(8);
                cell9.innerHTML = "<input type='checkbox'>";
                var cell10 = row.insertCell(9);
                cell10.innerHTML = "<input type='checkbox'>";
                //Label
                var label = kb.where("<" + sls_url + ">" + " rdfs:label ?label");
                label.each(function () {
                        cell4.childNodes[0].value = this["label"].value;
                    })
                    // Unit of Measurement
                var uom = kb.where("<" + sls_url + ">" + " gr:hasUnitOfMeasurement ?uom");
                uom.each(function () {
                        cell5.childNodes[0].value = this["uom"].value;
                    })
                    // Min value integer
                var minv = kb.where("<" + sls_url + ">" + " gr:hasMinValueInteger ?minv");
                minv.each(function () {
                        cell7.childNodes[0].value = this["minv"].value;
                    })
                    // Max value integer
                var maxv = kb.where("<" + sls_url + ">" + " gr:hasMaxValueInteger ?maxv");
                maxv.each(function () {
                        cell8.childNodes[0].value = this["maxv"].value;
                    })
                    // Range
                var range = kb.where("<" + sls_url + ">" + " usdl-core-cb:isRange ?range");
                range.each(function () {
                        if (this["range"].value.toString() == "true") {
                            cell9.childNodes[0].checked = true;
                        } else {
                            cell9.childNodes[0].checked = false;
                        }
                    })
                    //Higher is better
                var hib = kb.where("<" + sls_url + ">" + " usdl-core-cb:higherIsBetter ?hib");
                hib.each(function () {

                    if (this["hib"].value.toString() == "true") {
                        cell10.childNodes[0].checked = true;
                    } else {
                        cell10.childNodes[0].checked = false;
                    }

                })
            })
            quant_sls = kb.where("?qvc rdfs:subClassOf gr:QuantitativeValueFloat");
            quant_sls.each(function () {
                var selection = this["qvc"];
                var sls_url = selection.value._string;
                var table = document.getElementById("quantserviceleveldetails");
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                var cell1 = row.insertCell(0);
                cell1.innerHTML = "<input type='checkbox'>";
                var cell2 = row.insertCell(1);
                cell2.innerHTML = rowCount + 1;
                var cell3 = row.insertCell(2);
                cell3.innerHTML = "<input type='text'>";

                cell3.childNodes[0].value = sls_url.split("#")[1];
                var cell4 = row.insertCell(3);
                cell4.innerHTML = "<input type='text'>";
                var cell5 = row.insertCell(4);
                cell5.innerHTML = "<input type='text'>";
                var cell6 = row.insertCell(5);
                cell6.innerHTML = "<select name='valuetype' id='value_type' > <option>float</option> <option>integer</option>  </select>";
                var cell7 = row.insertCell(6);
                cell7.innerHTML = "<input type='text'>";
                var cell8 = row.insertCell(7);
                cell8.innerHTML = "<input type='text'>";
                var cell9 = row.insertCell(8);
                cell9.innerHTML = "<input type='checkbox'>";
                var cell10 = row.insertCell(9);
                cell10.innerHTML = "<input type='checkbox'>";
                //Label
                var label = kb.where("<" + sls_url + ">" + " rdfs:label ?label");
                label.each(function () {
                        cell4.childNodes[0].value = this["label"].value;
                    })
                    // Unit of Measurement
                var uom = kb.where("<" + sls_url + ">" + " gr:hasUnitOfMeasurement ?uom");
                uom.each(function () {
                        cell5.childNodes[0].value = this["uom"].value;
                    })
                    // Min value integer
                var minv = kb.where("<" + sls_url + ">" + " gr:hasMinValueFloat ?minv");
                minv.each(function () {
                        cell7.childNodes[0].value = this["minv"].value;
                    })
                    // Max value integer
                var maxv = kb.where("<" + sls_url + ">" + " gr:hasMaxValueFloat ?maxv");
                maxv.each(function () {
                        cell8.childNodes[0].value = this["maxv"].value;
                    })
                    // Range
                var range = kb.where("<" + sls_url + ">" + " usdl-core-cb:isRange ?range");
                range.each(function () {
                    if (this["range"].value.toString() == "true") {
                        cell9.childNodes[0].checked = true;
                    } else {
                        cell9.childNodes[0].checked = false;
                    }
                })

                //Higher is better

                var hib = kb.where("<" + sls_url + ">" + " usdl-core-cb:higherIsBetter ?hib");
                hib.each(function () {
                    if (this["hib"].value.toString() == "true") {
                        cell10.childNodes[0].checked = true;
                    } else {
                        cell10.childNodes[0].checked = false;
                    }
                })

            })

        }

        function createQuantitativeSLValuesTable(kb) {
            // Create integer values
            var quant_sls = kb.where("?qvc rdfs:subClassOf gr:QuantitativeValueInteger");
            quant_sls.each(function () {
                    var selection = this["qvc"];
                    var sls_url = selection.value._string;
                    var table = document.getElementById("slvaluequant");
                    var rowCount = table.rows.length;
                    var row = table.insertRow(rowCount);
                    var cell1 = row.insertCell(0);
                    cell1.innerHTML = "<input type='checkbox'>";
                    var cell2 = row.insertCell(1);
                    cell2.innerHTML = rowCount + 1;
                    // Service Level type
                    var cell3 = row.insertCell(2);
                    cell3.innerHTML = "<input type='text'>";
                    cell3.childNodes[0].value = sls_url.split("#")[1];
                    cell3.childNodes[0].disabled = true;
                    // Service Level type description
                    var cell4 = row.insertCell(3);
                    cell4.innerHTML = "<input type='text'>";
                    cell4.childNodes[0].disabled = true;

                    // Service Level value
                    var cell5 = row.insertCell(4);
                    cell5.innerHTML = "<input type='text'>";
                    // Service Level description
                    var cell6 = row.insertCell(5);
                    cell6.innerHTML = "<input type='text'>";

                    // Unit of measurement
                    var cell7 = row.insertCell(6);
                    cell7.innerHTML = "<input type='text'>";
                    cell7.childNodes[0].disabled = true;
                    // Value type integer
                    var cell8 = row.insertCell(7);
                    cell8.innerHTML = "<input type='text'>";
                    cell8.childNodes[0].value = "integer";
                    cell8.childNodes[0].disabled = true;
                    // Min value
                    var cell9 = row.insertCell(8);
                    cell9.innerHTML = "<input type='text'>";
                    // Value
                    var cell10 = row.insertCell(9);
                    cell10.innerHTML = "<input type='text'>";
                    // Max value
                    var cell11 = row.insertCell(10);
                    cell11.innerHTML = "<input type='text'>";
                    // Is range
                    var cell12 = row.insertCell(11);
                    cell12.innerHTML = "<input type='checkbox'>";
                    // Higher is better
                    var cell13 = row.insertCell(12);
                    cell13.innerHTML = "<input type='checkbox'>";
                    //Label
                    var label = kb.where("<" + sls_url + ">" + " rdfs:label ?label");
                    label.each(function () {
                            cell4.childNodes[0].value = this["label"].value;
                        })
                        // Unit of Measurement
                    var uom = kb.where("<" + sls_url + ">" + " gr:hasUnitOfMeasurement ?uom");
                    uom.each(function () {
                            cell7.childNodes[0].value = this["uom"].value;
                        })
                        // Min value integer
                    var minv = kb.where("<" + sls_url + ">" + " gr:hasMinValueInteger ?minv");
                    minv.each(function () {
                            cell9.childNodes[0].value = this["minv"].value;
                        })
                        // Max value integer
                    var maxv = kb.where("<" + sls_url + ">" + " gr:hasMaxValueInteger ?maxv");
                    maxv.each(function () {
                            cell11.childNodes[0].value = this["maxv"].value;
                        })
                        // Range
                    var range = kb.where("<" + sls_url + ">" + " usdl-core-cb:isRange ?range");
                    range.each(function () {
                            if (this["range"].value.toString() == "true") {
                                cell12.childNodes[0].checked = true;
                                cell10.childNodes[0].disabled = true;
                            } else {
                                cell12.childNodes[0].checked = false;
                                cell9.childNodes[0].disabled = true;
                                cell11.childNodes[0].disabled = true;
                            }
                        })
                        //Higher is better
                    var hib = kb.where("<" + sls_url + ">" + " usdl-core-cb:higherIsBetter ?hib");
                    hib.each(function () {

                        if (this["hib"].value.toString() == "true") {
                            cell13.childNodes[0].checked = true;
                        } else {
                            cell13.childNodes[0].checked = false;
                        }

                    })
                })
                // Create float values
            quant_sls = kb.where("?qvc rdfs:subClassOf gr:QuantitativeValueFloat");
            quant_sls.each(function () {
                var selection = this["qvc"];
                var sls_url = selection.value._string;
                var table = document.getElementById("slvaluequant");
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                var cell1 = row.insertCell(0);
                cell1.innerHTML = "<input type='checkbox'>";
                var cell2 = row.insertCell(1);
                cell2.innerHTML = rowCount + 1;
                // Service Level type
                var cell3 = row.insertCell(2);
                cell3.innerHTML = "<input type='text'>";
                cell3.childNodes[0].value = sls_url.split("#")[1];
                cell3.childNodes[0].disabled = true;
                // Service Level type description
                var cell4 = row.insertCell(3);
                cell4.innerHTML = "<input type='text'>";
                cell4.childNodes[0].disabled = true;

                // Service Level value
                var cell5 = row.insertCell(4);
                cell5.innerHTML = "<input type='text'>";
                // Service Level description
                var cell6 = row.insertCell(5);
                cell6.innerHTML = "<input type='text'>";

                // Unit of measurement
                var cell7 = row.insertCell(6);
                cell7.innerHTML = "<input type='text'>";
                cell7.childNodes[0].disabled = true;
                // Value type integer
                var cell8 = row.insertCell(7);
                cell8.innerHTML = "<input type='text'>";
                cell8.childNodes[0].value = "float";
                cell8.childNodes[0].disabled = true;
                // Min value
                var cell9 = row.insertCell(8);
                cell9.innerHTML = "<input type='text'>";
                // Value
                var cell10 = row.insertCell(9);
                cell10.innerHTML = "<input type='text'>";
                // Max value
                var cell11 = row.insertCell(10);
                cell11.innerHTML = "<input type='text'>";
                // Is range
                var cell12 = row.insertCell(11);
                cell12.innerHTML = "<input type='checkbox'>";
                // Higher is better
                var cell13 = row.insertCell(12);
                cell13.innerHTML = "<input type='checkbox'>";
                //Label
                var label = kb.where("<" + sls_url + ">" + " rdfs:label ?label");
                label.each(function () {
                        cell4.childNodes[0].value = this["label"].value;
                    })
                    // Unit of Measurement
                var uom = kb.where("<" + sls_url + ">" + " gr:hasUnitOfMeasurement ?uom");
                uom.each(function () {
                        cell7.childNodes[0].value = this["uom"].value;
                    })
                    // Min value integer
                var minv = kb.where("<" + sls_url + ">" + " gr:hasMinValueFloat ?minv");
                minv.each(function () {
                        cell9.childNodes[0].value = this["minv"].value;
                    })
                    // Max value integer
                var maxv = kb.where("<" + sls_url + ">" + " gr:hasMaxValueFloat ?maxv");
                maxv.each(function () {
                        cell11.childNodes[0].value = this["maxv"].value;
                    })
                    // Range
                var range = kb.where("<" + sls_url + ">" + " usdl-core-cb:isRange ?range");
                range.each(function () {
                        if (this["range"].value.toString() == "true") {
                            cell12.childNodes[0].checked = true;
                            cell10.childNodes[0].disabled = true;
                        } else {
                            cell12.childNodes[0].checked = false;
                            cell9.childNodes[0].disabled = true;
                            cell11.childNodes[0].disabled = true;
                        }
                    })
                    //Higher is better
                var hib = kb.where("<" + sls_url + ">" + " usdl-core-cb:higherIsBetter ?hib");
                hib.each(function () {

                    if (this["hib"].value.toString() == "true") {
                        cell13.childNodes[0].checked = true;
                    } else {
                        cell13.childNodes[0].checked = false;
                    }

                })
            })

        }

        function loadClassificationTaxonomy(kb) {
            // load top concept
            var topconcept = kb.where("?concept a usdl-core-cb:ClassificationDimension")
                .where("?scheme a skos:ConceptScheme")
                .where("?concept skos:topConceptOf ?scheme");
            var tc = "";
            topconcept.each(function () {
                var selection = this["concept"];
                var tc_url = selection.value._string;

                tc = tc_url;
                document.getElementById("classtaxURI").value = tc_url.split("#")[0];
                document.getElementById("classtaxroot").valueclasstaxroot = tc_url.split("#")[1];
            })
            var query = "?classconcept skos:broader <" + tc + ">";

            var classconcepts = kb.where(query)
                .where("?classconcept a usdl-core-cb:ClassificationDimension");
            var c_url = "";
            classconcepts.each(function () {
                var selection = this["classconcept"];
                var c_url = selection.value._string;
                var table = document.getElementById("classtaxconcepts");
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                var cell1 = row.insertCell(0);

                cell1.innerHTML = "<input type='checkbox'>";
                var cell2 = row.insertCell(1);
                cell2.innerHTML = rowCount + 1;
                var cell3 = row.insertCell(2);
                cell3.innerHTML = "<input type='text'>";
                cell3.childNodes[0].value = c_url.split("#")[1];

                var cell4 = row.insertCell(3);
                cell4.innerHTML = "<input type='text'>";
                var cell5 = row.insertCell(4);
                cell5.innerHTML = "<input type='text'>";

                var title = kb.where("<" + c_url + ">" + " dcterms:title ?title");
                title.each(function () {
                    cell4.childNodes[0].value = this["title"].value;
                })
                var label = kb.where("<" + c_url + ">" + " skos:prefLabel ?label");
                label.each(function () {
                    cell5.childNodes[0].value = this["label"].value;
                })

            })

        }

        function loadClassificationConcepts(kb) {
            var classconcepts = kb.where("?concept a usdl-core-cb:ClassificationDimension");

            classconcepts.each(function () {
                var selection = this["concept"];
                var url = selection.value._string;
                var selectelement = document.getElementById("classtaxonomy");
                var concept = document.createElement("option");
                concept.value = url;
                concept.text = url.split('#')[1];
                selectelement.add(concept, null);

            })
        }

        function storeSD() {
            var kb_sd = $.rdf()
                .base(document.getElementById("sd_namespace").value)
                .prefix('foaf', 'http://xmlns.com/foaf/0.1/')
                .prefix('rdf', 'http://www.w3.org/1999/02/22-rdf-syntax-ns#')
                .prefix('rdfs', 'http://www.w3.org/2000/01/rdf-schema#')
                .prefix('owl', 'http://www.w3.org/2002/07/owl#')
                .prefix('dcterms', 'http://purl.org/dc/terms/')
                .prefix('usdl-core', 'http://www.linked-usdl.org/ns/usdl-core#')
                .prefix('usdl-core-cb', 'http://www.linked-usdl.org/ns/usdl-core/cloud-broker#')
                .prefix('usdl-sla', 'http://www.linked-usdl.org/ns/usdl-sla#')
                .prefix('usdl-sla-cb', 'http://www.linked-usdl.org/ns/usdl-core/cloud-broker-sla#')
                .prefix('usdl-business-roles', 'http://www.linked-usdl.org/ns/usdl-business-roles#')
                .prefix('blueprint', 'http://bizweb.sap.com/TR/blueprint#')
                .prefix('vcard', 'http://www.w3.org/2006/vcard/ns#')
                .prefix('xsd', 'http://www.w3.org/2001/XMLSchema#')
                .prefix('ctag', 'http://commontag.org/ns#')
                .prefix('org', 'http://www.w3.org/ns/org#')
                .prefix('skos', 'http://www.w3.org/2004/02/skos/core#')
                .prefix('time', 'http://www.w3.org/2006/time#')
                .prefix('gr', 'http://purl.org/goodrelations/v1#')
                .prefix('doap', 'http://usefulinc.com/ns/doap#')
                .prefix('bp', document.kb.databank.baseURI)
                // Create the business entity of the service provider
                .add("<" + document.getElementById("sp_business_entity").value + "> a gr:BusinessEntity .")
                .add('<' + document.getElementById("sp_business_entity").value + '> gr:legalName ' + '"' + document.getElementById("sp_legal_name").value + '"' + ' .')
                // Create the entity involvement instance and bind it to the service provider business entity
                .add("<" + document.getElementById("sp_business_entity").value + "EntityInvolvement" + "> a usdl-core:EntityInvolvement .")
                .add("<" + document.getElementById("sp_business_entity").value + "EntityInvolvement" + "> usdl-core:withBusinessRole usdl-business-roles:provider .")
                .add("<" + document.getElementById("sp_business_entity").value + "EntityInvolvement" + "> usdl-core:ofBusinessEntity <" + document.getElementById("sp_business_entity").value + "> .")
                // Create the service instance
                .add("<" + document.getElementById("sd").value + "> a usdl-core:Service .")
                .add("<" + document.getElementById("sd").value + "> dcterms:creator <" + document.getElementById("sp_business_entity").value + "> .")
                .add("<" + document.getElementById("sd").value + "> usdl-core:hasEntityInvolvement <" + document.getElementById("sp_business_entity").value + "EntityInvolvement> .")
                .add("<" + document.getElementById("sd").value + "> usdl-core-cb:hasServiceModel <" + document.getElementById("sd_model").value + "> .")
                // Create the service model instance
                .add("<" + document.getElementById("sd_model").value + "> a bp:" + document.getElementById("servicemodel_class").value + " .")
                .add("<" + document.getElementById("sd_model").value + "> gr:isVariantOf bp:" + document.getElementById("servicemodel").value + " .")
                // Create and assign a profile instance to the service model
                .add("<" + document.getElementById("slp").value + "> a bp:" + document.getElementById("slp_class").value + " .")
                .add("<" + document.getElementById("sd_model").value + "> bp:has" + document.getElementById("slp_class").value + " <" + document.getElementById("slp").value + "> .");
            // Add the chosen classification concepts to the service model
            kb_sd = addClassificationConceptsToSD(kb_sd);
            kb_sd = addQualServiceLevelsToSD(kb_sd);
            kb_sd = addQuantServiceLevelsToSD(kb_sd);
            // Dump the kb with the service description to a turtle format and show it in a separate window.
            var dmp = kb_sd.databank.dump({
                format: 'text/turtle',
                indent: true,
                serialize: true
            })
            var uueFile = Base64.encode(dmp)
            var uri = 'data:text/turtle;base64,' + encodeURIComponent(uueFile)
            window.open(uri)
        }
    </script>
</head>

<body style="background-color: lightsilver">
    <div class="jumbotron">
        <div class="container">
            <div class="col-md-3">
                <a href="http://www.broker-cloud.eu/">
                    <img src="images/BrokerAtCloud_medium.png" alt="Broker@Cloud Logo" style="width:100%">
                </a>
            </div>
            <div class="col-md-9">
                <h1> Welcome to the Broker@Cloud Service Description Editor based on Broker Policy Type 2</h1>
                <p>More description will be entered here.</p>
            </div>
        </div>
    </div>
    <div class="container" role="main">

        <div class="col-md-12">
            <div class="row">
                <div id="serviceLoadArea" class="collapse in">

                    <p>Note: You have to load a valid broker policy of type 1 into the editor.</p>
                    <h1> Use drag and drop functionality to load the file containing the broker policy!</h1>

                    <div class="droptarget" ondrop="loadBP(event)" ondragover="allowDrop(event)">
                        <p id="bp"> Drop your broker policy here! </p>
                    </div>

                </div>
                <div id="serviceEditArea" class="collapse in">
                    <div class="container">
                        <div class="row panel1col">
                            <div class="col-sm-6">
                                <div class="panel panel-default panel2col">
                                    <div class="panel-heading">
                                        <h1> Broker Policy </h1>
                                    </div>
                                    <div class="panel-body">

                                        <form class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="bp_namespace">Broker namespace</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="bp_namespace" placeholder="http://yourbrokernamespace.com"> </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="bp_business_entity">Broker acronym</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="bp_business_entity" placeholder="YourBrokerCompanyAcronym">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="bp_legal_name">Broker legal name</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="bp_legal_name" placeholder="Your BrokerCompany Legal Name">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="bp_instance">Broker policy title</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="bp_instance" placeholder="YourBrokerPolicyTitle">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="bp_model">Broker policy model name</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="bp_model" placeholder="YourBrokerPolicyModelName">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="slp_class">Service Level Profile Type</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="slp_class" placeholder="SomeServiceLevelProfile">
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="panel panel-default panel2col">
                                    <div class="panel-heading">
                                        <h1>Service and Service Provider Description</h1>
                                    </div>
                                    <div class="panel-body">
                                        <form class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="sd_namespace">Service provider namespace</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="sd_namespace" value="http://yournamespace.com">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="sp_business_entity">Provider acronym</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="sp_business_entity" value="YourCompanyAcronym">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="sp_legal_name">Provider legal name</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="sp_legal_name" value="Your Company Legal Name">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="sd">Service title</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="sd" value="YourServiceDescriptionTitle">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="sd_model">Service model name</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="sd_model" value="YourServiceModelName">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="slp">Service Level Profile Title</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" type="text" id="slp" value="YourServiceLevelProfileTitle">
                                                </div>
                                            </div>
                                            <input type="text" id="servicemodel_class" value="Broker Policy Class" disabled="disabled" hidden="hidden">
                                            <input type="text" id="servicemodel" value="Broker Policy Instance" disabled="disabled" hidden="hidden">
                                        </form>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default panel1col">

                        <div class="panel-heading">
                            <h1> Classification taxonomy of the Broker Policy</h1>
                        </div>
                        <div class="panel-body">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-2 control-label" for="classtaxpref">Prefix</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" id="classtaxpref" value="fc">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label" for="classtaxURI">URI</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" id="classtaxURI" value="http://www.broker-cloud.eu/service-descriptions/CAS/categories">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label" for="classtaxroot">Root concept</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" id="classtaxroot" value="rootConcept">
                                    </div>
                                </div>
                            </form>

                            <table class="table innerTable" id="classtaxconcepts">
                                <tr>
                                    <th></th>
                                    <th>#</th>
                                    <th>Classification tag</th>
                                    <th>Description</th>
                                    <th>Label</th>
                                </tr>
                            </table>
                            <!--    <div class="bc-button4table" style="width: 95%">
                    <button class="btn btn-default" id= "classtax_table_add" onclick="addClassificationConcept()"> Add </button>
                    <button class="btn btn-default" id ="classtax_table_delete" onclick="deleteClassificationConcept()"> Delete </button>
</div>   --></div>


                        <div class="panel panel-default innerPanel">
                            <div class="panel-heading">
                                <h2> Classify your service</h2>
                            </div>
                            <div class="panel-body">
                                <p>Available service classification concepts:
                                    <select name="classifications" id="classtaxonomy"> </select>
                                    <button class="btn btn-default" onclick="addConcept()"> Add </button>
                                    <button class="btn btn-default" onclick="deleteConcept()"> Delete </button>
                                    <table id="class_table">
                                    </table>
                                </p>

                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default panel1col">

                        <div class="panel-heading">
                            <h1> Specify your quantitative service levels</h1>
                        </div>
                        <div class="panel-body">

                            <h2>Quantitative Service Level Schemas </h2>

                            <div style="display:none">
                                <table class="table" style="width: 95%" id="quantserviceleveldetails">
                                    <tr>
                                        <th></th>
                                        <th>#</th>
                                        <th>Service Level Schema</th>
                                        <th>Description</th>
                                        <th>Unit of Measurement</th>
                                        <th>Value type</th>
                                        <th>Min Value</th>
                                        <th>Max Value</th>
                                        <th>Is Range</th>
                                        <th>Higher is better</th>
                                    </tr>
                                </table>
                            </div>
                            <!-- <div
               <class="bc-button4table" style="width: 95%">
                    <button class="btn btn-default" id= "quant_sl_table_add" onclick="addQuantSLConcept()"> Add </button>
                    <button class="btn btn-default" id ="quant_sl_table_delete" onclick="deleteQuantSLConcept()"> Delete </button>
                </div>        -->
                            <h2>Set quantitative values</h2>
                            <table class="table" style="width: 95%" id="slvaluequant">
                                <tr>
                                    <th></th>
                                    <th>#</th>
                                    <th>SL Schema</th>
                                    <th> SL Schema Description</th>
                                    <th>Service Level</th>
                                    <th>Service Level Description</th>
                                    <th>Unit of Measurement</th>
                                    <th>Value type</th>
                                    <th>Min Value</th>
                                    <th>Value</th>
                                    <th>Max Value</th>
                                    <th>Is Range</th>
                                    <th>Higher is better</th>
                                </tr>
                            </table>
                        </div>
                    </div>


                    <div class="panel panel-default panel1col">

                        <div class="panel-heading">
                            <h1>Specify your qualitative service levels </h1>
                        </div>
                        <div class="panel-body">
                            <h1>Qualitative Service Level Schemas </h1>

                            <table class="table" style="width: 95%" id="qualserviceleveldetails">
                                <tr>
                                    <th></th>
                                    <th>#</th>
                                    <th>Service Level</th>
                                    <th>Description</th>
                                </tr>
                            </table>

                            <h1>Qualitative value sets </h1>
                            <p id="qualvalues">

                            </p>
                            <h2>Select qualitative values</h2>
                            <p id="slspecqual"></p>

                        </div>
                    </div>


                    <div class="bc-buttongroup">
                        <button class="btn btn-default" onclick="storeSD()">Show the service description specification. </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>